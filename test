def update(self):
    '''run all updates'''
    self.all_sprites.update()
    
    # Check for level transition
    for level in self.level_list:
        if level.rect.colliderect(self.guy.rect):
            self.index += 1
            if self.index < len(map_list):
                self.current_level = map_list[self.index]
                self.new()  # Reload the level with new map
            else:
                # Game completed - loop back to first level or show victory screen
                self.index = 0
                self.current_level = map_list[self.index]
                self.new()
    
    self.game_viewer.update(self.guy)
    if len(self.coin_group) <= 3:
        pass